<!DOCTYPE html>
<html lang="sv">
<head>
    <script>
        (function() {
            // Check for manual language selection override first
            const urlParams = new URLSearchParams(window.location.search);
            const manualLang = urlParams.get('lang');

            if (manualLang === 'sv') {
                // User manually selected Swedish, do nothing
                return;
            }

            // If no manual override, check browser language for redirection
            const lang = navigator.language || navigator.userLanguage || 'en';
            if (!lang.toLowerCase().startsWith('sv')) {
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1);
                // Ensure we remove index.html before appending index_en.html if needed
                const targetPath = (currentPath.endsWith('index.html') ? basePath : currentPath) + 'index_en.html';
                window.location.replace(targetPath + window.location.search + window.location.hash);
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KoaLens</title>
    <meta name="description" content="KoaLens - Snabb vegansk koll med AI.">
    <!-- Favicon Links -->
    <link rel="icon" href="assets/images/favicon/favicon.ico" sizes="any"><!-- Standard ICO -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon/apple-touch-icon.png">
    <link rel="manifest" href="assets/images/favicon/site.webmanifest">
    <meta name="theme-color" content="#ffffff">
    <!-- Google Fonts (Poppins) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="site-header">
        <div class="container">
            <!-- Header content (logo, navigation) will go here -->
            <nav class="main-nav">
                <div class="logo">
                    <a href="#">
                        <img src="assets/images/website.logo.png" alt="KoaLens Logotyp" style="height: 50px; display: block;">
                    </a>
                </div>
                <div class="nav-controls"> <!-- Wrapper for button and switcher -->
                    <div class="language-switcher">
                        <a href="index_en.html" lang="en">English</a>
                    </div>
                    <a href="#download" class="button nav-button">Ladda ner appen</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- Main page content will go here -->
        <section class="hero">
            <div class="container hero-container">
                <div class="hero-text">
                    <h1>Vegankoll på sekunder – Skanna med kameran.</h1>
                    <p class="subtitle">Osäker om det är veganskt? Rikta kameran mot ingredienslistan och låt KoaLens AI ge dig svaret på ett ögonblick. Perfekt för dig som väljer veganskt!</p>
                    <p class="e-number-tease"><em>(Psst...appen har även koll på alla de där jobbiga e-ämnerna!)</em></p>
                    <p class="free-highlight"><strong>Ladda ner och använd helt gratis!</strong></p>
                    <p class="launch-status"><strong>Lanseras snart för Android!</strong> Håll utkik här för uppdateringar.</p>
                </div>
                <div class="hero-image">
                    <div class="carousel">
                        <div class="carousel-track">
                            <div class="carousel-slide">
                                <img src="assets/images/start_table.png" alt="KoaLens app på ett bord">
                            </div>
                            <div class="carousel-slide">
                                <img src="assets/images/Skanna_sidan.png" alt="KoaLens app skanningssida">
                            </div>
                             <div class="carousel-slide">
                                <img src="assets/images/Produkten_analyserad_vegan.png" alt="Hand som håller telefon med KoaLens resultat">
                            </div>
                        </div>
                        <!-- Optional: Add carousel controls (dots/buttons) here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- About Slider Section -->
        <section class="about-slider" id="about">
            <div class="container">
                <h2>Lär känna <span class="headline-brand">KoaLens</span></h2>
                <div class="slider-wrapper">
                    <div class="slider-container">
                        <div class="slider-track">
                            <!-- Slide 1: What & Problem -->
                            <div class="slider-slide active">
                                <div class="slide-image">
                                    <img src="assets/images/analyserar.png" alt="Hand håller mobil som analyserar ingredienser i butik">
                                </div>
                                <div class="slide-content">
                                    <h3>Vad är KoaLens?</h3>
                                    <p>KoaLens använder AI och video för att blixtsnabbt analysera ingredienslistor direkt från förpackningen – helt utan streckkoder. Få svar direkt om en produkt är vegansk och slipp osäkerheten.</p>
                                </div>
                            </div>
                            <!-- Slide 2: Who & Where -->
                            <div class="slider-slide">
                                <div class="slide-image">
                                    <img src="assets/images/resultat_vegan.png" alt="Person ser positivt vegan-resultat i appen i köksmiljö">
                                </div>
                                <div class="slide-content">
                                    <h3>För vem och var?</h3>
                                    <p>Perfekt för veganer, nyfikna på växtbaserat eller dig som undviker specifika animaliska ingredienser. Använd KoaLens i mataffären, hemma vid skafferiet eller när du behöver snabb koll på språng.</p>
                                </div>
                            </div>
                            <!-- Slide 3: Language -->
                            <div class="slider-slide">
                                <div class="slide-image">
                                    <img src="assets/images/language.png" alt="Person tittar på internationell matvara i butikshylla">
                                </div>
                                <div class="slide-content">
                                    <h3>Språk är inget hinder</h3>
                                    <p>Reser du utomlands? Hittat en spännande importvara? KoaLens läser ingredienslistor på vilket språk som helst och ger dig analysen direkt på svenska. Ta med dig tryggheten, vart du än är.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="slider-button prev"><i class="fas fa-chevron-left"></i></button>
                    <button class="slider-button next"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </section>

        <!-- Video Demo Section -->
        <section class="video-demo" id="video-demo">
            <div class="container">
                <h2>Se KoaLens <span class="headline-highlight">in action</span></h2>
                <p class="video-description">Se hur snabbt och enkelt det är att få svar med KoaLens – från skanning till resultat.</p>
                <div class="video-wrapper"> <!-- Wrapper for responsive iframe -->
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/nGZv4vcTKAw?si=someRandomValueForPrivacy" title="KoaLens App Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
            </div>
        </section>

        <!-- Features section will go here -->
        <section class="features" id="features">
            <div class="container">
                <h2>Mer än bara en veganskanner</h2>
                <div class="feature-grid">
                    <!-- Feature 1: Snabb videoanalys -->
                    <div class="feature-item">
                        <i class="fas fa-video feature-icon"></i>
                        <h3>Snabb Videoanalys</h3>
                        <p>Spela in ingredienslistan – AI:n analyserar och ger dig svar på sekunder.</p>
                    </div>
                    <!-- Feature 4: Tydliga Resultat -->
                     <div class="feature-item">
                        <i class="fas fa-clipboard-check feature-icon"></i>
                        <h3>Tydliga Resultat</h3>
                        <p>Få ett klart och tydligt besked – veganskt, ej veganskt, osäkert eller om en bevakad ingrediens hittats.</p>
                    </div>
                    <!-- Feature 2: Bevaka ingredienser -->
                    <div class="feature-item">
                        <i class="fas fa-user-check feature-icon"></i>
                        <h3>Bevaka Ingredienser</h3>
                        <p>Skapa din egen lista med ämnen att hålla koll på (t.ex. allergener, palmolja, socker).</p>
                    </div>
                    <!-- Feature 3: E-nummer Koll -->
                    <div class="feature-item">
                        <i class="fas fa-flask feature-icon"></i>
                        <h3>E-nummer Koll</h3>
                        <p>Osäker på ett E-nummer? Använd den inbyggda sökfunktionen för snabbt svar om vegansk status.</p>
                    </div>
                    <!-- Feature 5: Spara Historik -->
                    <div class="feature-item">
                        <i class="fas fa-history feature-icon"></i>
                        <h3>Spara din Historik</h3>
                        <p>Spara dina analyser för att enkelt kunna se och komma åt tidigare resultat i historiken.</p>
                    </div>
                    <!-- Feature 6: Multi-language Support -->
                    <div class="feature-item">
                        <i class="fas fa-language feature-icon"></i>
                        <h3>Flerspråksstöd</h3>
                        <p>Skanna ingredienslistor på vilket språk som helst och få resultatet presenterat på svenska.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Download CTA section will go here -->
        <section class="download-cta" id="download">
             <div class="container cta-container">
                 <h2>Skaffa KoaLens – Snabbare svar, tryggare val.</h2>
                 <p>Ladda ner KoaLens och gör medvetna val enklare än någonsin.</p>
                 <p class="free-highlight-cta"><strong>Appen är helt kostnadsfri att använda.</strong></p>
                 <p class="launch-status-cta"><strong>Gör dig redo – lansering kommer snart!</strong></p>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <!-- Footer content (copyright, links) will go here -->
             <p>&copy; 2024 KoaLens. Alla rättigheter förbehållna.</p>
             <p class="footer-links">
                <a href="privacy.html">Integritetspolicy</a> | <a href="terms.html">Användarvillkor</a> | <a href="delete-account.html">Kontoradering</a>
             </p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const track = document.querySelector('.carousel-track');
            const slides = Array.from(track.children);
            const slideWidth = slides[0].getBoundingClientRect().width;
            let slideIndex = 0;
            const slideCount = slides.length;

            if (slideWidth > 0) { // Extra check to ensure width is calculated
                setInterval(() => {
                    slideIndex++;
                    if (slideIndex >= slideCount) {
                        slideIndex = 0; // Loop back to the first slide
                    }
                    track.style.transform = 'translateX(-' + slideIndex * slideWidth + 'px)';
                }, 4000); // Change slide every 4 seconds
            } else {
                console.error("Carousel slide width is 0. Check layout or image loading.");
            }
        });
    </script>

    <!-- Script for About Slider -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sliderTrack = document.querySelector('.about-slider .slider-track');
            const slides = Array.from(sliderTrack.children).filter(el => el.classList.contains('slider-slide'));
            const nextButton = document.querySelector('.about-slider .slider-button.next');
            const prevButton = document.querySelector('.about-slider .slider-button.prev');
            let currentSlideIndex = 0;
            const slideCount = slides.length;

            const updateSlides = (targetIndex) => {
                slides[currentSlideIndex].classList.remove('active');
                slides[targetIndex].classList.add('active');
                currentSlideIndex = targetIndex;
            };

            nextButton.addEventListener('click', () => {
                const nextIndex = (currentSlideIndex + 1) % slideCount;
                updateSlides(nextIndex);
            });

            prevButton.addEventListener('click', () => {
                const prevIndex = (currentSlideIndex - 1 + slideCount) % slideCount;
                updateSlides(prevIndex);
            });

            // Initialize first slide
            if (slides.length > 0) {
                 slides[0].classList.add('active'); // Ensure the first slide is active initially
            }

            // --- Swipe Functionality ---
            let touchStartX = 0;
            let touchEndX = 0;
            const swipeThreshold = 50; // Minimum distance for a swipe

            sliderTrack.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true }); // Use passive for better scroll performance

            sliderTrack.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });

            function handleSwipe() {
                const deltaX = touchEndX - touchStartX;

                if (Math.abs(deltaX) > swipeThreshold) {
                    if (deltaX < 0) {
                        // Swipe Left (Next)
                        const nextIndex = (currentSlideIndex + 1) % slideCount;
                        updateSlides(nextIndex);
                    } else {
                        // Swipe Right (Previous)
                        const prevIndex = (currentSlideIndex - 1 + slideCount) % slideCount;
                        updateSlides(prevIndex);
                    }
                }
                // Reset values for next swipe
                touchStartX = 0;
                touchEndX = 0;
            }
            // --- End Swipe Functionality ---

        });
    </script>

</body>
</html> 